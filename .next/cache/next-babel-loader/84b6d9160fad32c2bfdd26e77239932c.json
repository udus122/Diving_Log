{"ast":null,"code":"var _jsxFileName = \"/Users/takedashuji/Desktop/study/js/React/Scuba-Diving Log/Component/Add/Add_Form.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport firebase from '../../lib/firebaseInit';\nimport { storage } from \"../../firebase\";\n\nclass Add_Form extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      Prefectures: '',\n      Place_Name: '',\n      DAY: '',\n      Shop_Name: '',\n      Weather: '',\n      SuitType: '',\n      Marine_life: '',\n      Memo: '',\n      image: null,\n      url: '',\n      progress: 0,\n      checkFileUploadFlg: false,\n      errorMsg: ''\n    };\n    this.onChangePrefectures = this.onChangePrefectures.bind(this);\n    this.onChangePlace_Name = this.onChangePlace_Name.bind(this);\n    this.onChangeDAY = this.onChangeDAY.bind(this);\n    this.onChangeShop_Name = this.onChangeShop_Name.bind(this);\n    this.onChangeWeather = this.onChangeWeather.bind(this);\n    this.onChangeSuitType = this.onChangeSuitType.bind(this);\n    this.onChangeMarine_life = this.onChangeMarine_life.bind(this);\n    this.onChangeMemo = this.onChangeMemo.bind(this);\n    this.exeAdd = this.exeAdd.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleUpload = this.handleUpload.bind(this);\n  }\n\n  handleChange(e) {\n    if (e.target.files[0]) {\n      this.setState({\n        image: e.target.files[0]\n      });\n      this.setState({\n        checkFileUploadFlg: true\n      });\n    }\n  }\n\n  handleUpload() {\n    const uploadTask = storage.ref(`images/${this.state.image.name}`).put(this.state.image);\n    uploadTask.on(\"state_changed\", snapshot => {\n      const progressnew = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n      this.setState({\n        progress: progressnew\n      });\n      this.setState({\n        url: this.state.url\n      });\n    }, error => {\n      console.log(error);\n    }, () => {\n      storage.ref(\"images\").child(this.state.image.name).getDownloadURL().then(url => {\n        console.log(url);\n        this.setState({\n          url: url\n        });\n      });\n    });\n    console.log(\"image: \", this.state.image);\n    event.preventDefault();\n  }\n\n  onChangePrefectures(e) {\n    this.setState({\n      Prefectures: e.target.value\n    });\n  }\n\n  onChangePlace_Name(e) {\n    this.setState({\n      Place_Name: e.target.value\n    });\n  }\n\n  onChangeDAY(e) {\n    this.setState({\n      DAY: e.target.value\n    });\n  }\n\n  onChangeShop_Name(e) {\n    this.setState({\n      Shop_Name: e.target.value\n    });\n  }\n\n  onChangeWeather(e) {\n    this.setState({\n      Weather: e.target.value\n    });\n  }\n\n  onChangeSuitType(e) {\n    this.setState({\n      SuitType: e.target.value\n    });\n  }\n\n  onChangeMarine_life(e) {\n    this.setState({\n      Marine_life: e.target.value\n    });\n  }\n\n  onChangeMemo(e) {\n    this.setState({\n      Memo: e.target.value\n    });\n  } //データ登録\n\n\n  exeAdd(e) {\n    const answer = window.confirm(\"登録内容にお間違いはありませんか？？\");\n\n    if (answer) {\n      let data = {\n        Prefectures: this.state.Prefectures,\n        Place_Name: this.state.Place_Name,\n        DAY: this.state.DAY,\n        Shop_Name: this.state.Shop_Name,\n        Weather: this.state.Weather,\n        SuitType: this.state.SuitType,\n        Marine_life: this.state.Marine_life,\n        Memo: this.state.Memo\n      };\n\n      if (this.isNullForm()) {\n        let db = firebase.database();\n        let ref = db.ref('diving-point-map');\n        console.log(ref);\n        ref.set(data);\n        this.setState({\n          Prefectures: '',\n          Place_Name: '',\n          DAY: '',\n          Shop_Name: '',\n          Weather: '',\n          SuitType: '',\n          Marine_life: '',\n          Memo: '※データを登録しました。ご協力ありがとうございます！！'\n        });\n        event.preventDefault();\n      } else {\n        window.alert(errorMsg);\n        event.preventDefault();\n      }\n    }\n\n    event.preventDefault();\n  }\n\n  isNullForm() {\n    if (this.state.Prefectures == null) {\n      this.setState({\n        errorMsg: 'Prefecturesを入力してください'\n      });\n      return false;\n    }\n\n    if (this.state.Place_Name == null) {\n      this.setState({\n        errorMsg: 'Place_Nameを入力してください'\n      });\n      return false;\n    }\n\n    if (this.state.DAY == null) {\n      this.setState({\n        errorMsg: 'DAYを入力してください'\n      });\n      return false;\n    }\n\n    if (this.state.Shop_Name == null) {\n      this.setState({\n        errorMsg: 'Shop_Nameを入力してください'\n      });\n      return false;\n    }\n\n    return true;\n  }\n\n  render() {\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 16\n      }\n    }, __jsx(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 13\n      }\n    }, __jsx(\"table\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }\n    }, __jsx(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 21\n      }\n    }, __jsx(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 25\n      }\n    }, __jsx(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 25\n      }\n    }, \"Prefectures:\"), __jsx(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 21\n      }\n    }, __jsx(\"input\", {\n      type: \"text\",\n      size: \"50\",\n      maxLength: \"7\",\n      required: true,\n      value: this.state.Prefectures,\n      onChange: this.onChangePrefectures,\n      placeholder: \"\\u90FD\\u9053\\u5E9C\\u770C\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 25\n      }\n    }))), __jsx(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 25\n      }\n    }, __jsx(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 25\n      }\n    }, \"Place_Name:\"), __jsx(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 25\n      }\n    }, __jsx(\"input\", {\n      type: \"text\",\n      size: \"50\",\n      maxLength: \"15\",\n      required: true,\n      value: this.state.Place_Name,\n      onChange: this.onChangePlace_Name,\n      placeholder: \"\\u30DD\\u30A4\\u30F3\\u30C8\\u540D\\uFF08\\u5730\\u540D\\uFF09\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 29\n      }\n    }))), __jsx(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 25\n      }\n    }, __jsx(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 25\n      }\n    }, \"DAY:\"), __jsx(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 25\n      }\n    }, __jsx(\"input\", {\n      type: \"date\",\n      size: \"50\",\n      maxLength: \"10\",\n      required: true,\n      value: this.state.DAY,\n      onChange: this.onChangeDAY,\n      placeholder: \"YYYY/MM/DD\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 29\n      }\n    }))), __jsx(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 25\n      }\n    }, __jsx(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 25\n      }\n    }, \"Weather:\"), __jsx(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 25\n      }\n    }, __jsx(\"input\", {\n      type: \"text\",\n      size: \"50\",\n      maxLength: \"10\",\n      value: this.state.Weather,\n      onChange: this.onChangeWeather,\n      placeholder: \"\\u5FEB\\u6674\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 29\n      }\n    }))), __jsx(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 25\n      }\n    }, __jsx(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 25\n      }\n    }, \"Shop_Name:\"), __jsx(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 25\n      }\n    }, __jsx(\"input\", {\n      type: \"text\",\n      size: \"50\",\n      maxLength: \"20\",\n      required: true,\n      value: this.state.Shop_Name,\n      onChange: this.onChangeShop_Name,\n      placeholder: \"\\u25CB\\u25CB\\u30C0\\u30A4\\u30D3\\u30F3\\u30B0\\u30B7\\u30E7\\u30C3\\u30D7\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 29\n      }\n    }))), __jsx(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 25\n      }\n    }, __jsx(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 25\n      }\n    }, \"SuitType:\"), __jsx(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 25\n      }\n    }, __jsx(\"input\", {\n      type: \"text\",\n      size: \"50\",\n      maxLength: \"10\",\n      value: this.state.SuitType,\n      onChange: this.onChangeSuitType,\n      placeholder: \"\\u30C9\\u30E9\\u30A4\\u30B9\\u30FC\\u30C4/\\u30A6\\u30A7\\u30C3\\u30C8\\u30B9\\u30FC\\u30C4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 29\n      }\n    }))), __jsx(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 25\n      }\n    }, __jsx(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 25\n      }\n    }, \"Marine life:\"), __jsx(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 25\n      }\n    }, __jsx(\"input\", {\n      type: \"text\",\n      size: \"50\",\n      maxLength: \"20\",\n      value: this.state.Marine_life,\n      onChange: this.onChangeMarine_life,\n      placeholder: \"\\u305D\\u306E\\u65E5\\u4E00\\u756A\\u306E\\u751F\\u304D\\u7269\\u306F\\u306A\\u3093\\u3067\\u3057\\u3087\\u3046\\u304B????\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 29\n      }\n    }))), __jsx(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 25\n      }\n    }, __jsx(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 25\n      }\n    }, \"Memo:\"), __jsx(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 25\n      }\n    }, __jsx(\"input\", {\n      type: \"textarea\",\n      size: \"50\",\n      maxLength: \"20\",\n      value: this.state.Memo,\n      onChange: this.onChangeMemo,\n      placeholder: \"\\u900F\\u660E\\u5EA6\\u30FB\\u900F\\u8996\\u5EA6\\u7B49\\u3001\\u3054\\u81EA\\u7531\\u306B\\u304A\\u4F7F\\u3044\\u304F\\u3060\\u3055\\u3044\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 29\n      }\n    }))))), __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 17\n      }\n    }), __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }\n    }, \"\\u3042\\u306A\\u305F\\u306E\\u30D9\\u30B9\\u30C8\\u30B7\\u30E7\\u30C3\\u30C8\\u3092\\u5171\\u6709\\u3057\\u307E\\u305B\\u3093\\u304B????\"), __jsx(\"div\", {\n      className: \"FileImage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 17\n      }\n    }, __jsx(\"progress\", {\n      value: this.state.progress,\n      max: \"100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 18\n      }\n    }), __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 18\n      }\n    }), __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 18\n      }\n    }), __jsx(\"input\", {\n      type: \"file\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 18\n      }\n    }), this.state.checkFileUploadFlg ? __jsx(\"button\", {\n      onClick: this.handleUpload,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 18\n      }\n    }, \"Upload\") : __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 18\n      }\n    }, \"\\u30D5\\u30A1\\u30A4\\u30EB\\u3092\\u9078\\u629E\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"), __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 18\n      }\n    }), this.state.url, __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 18\n      }\n    }), __jsx(\"div\", {\n      className: \"p-grid_list-images\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 18\n      }\n    }, __jsx(\"img\", {\n      src: this.state.url || \"http://via.placeholder.com/300\",\n      alt: \"firebase-image\",\n      className: \"img\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 21\n      }\n    }))), __jsx(\"button\", {\n      onClick: this.exeAdd,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 21\n      }\n    }, \"Add\")));\n  }\n\n}\n\n;\nexport default Add_Form;","map":{"version":3,"sources":["/Users/takedashuji/Desktop/study/js/React/Scuba-Diving Log/Component/Add/Add_Form.js"],"names":["React","Component","firebase","storage","Add_Form","constructor","props","state","Prefectures","Place_Name","DAY","Shop_Name","Weather","SuitType","Marine_life","Memo","image","url","progress","checkFileUploadFlg","errorMsg","onChangePrefectures","bind","onChangePlace_Name","onChangeDAY","onChangeShop_Name","onChangeWeather","onChangeSuitType","onChangeMarine_life","onChangeMemo","exeAdd","handleChange","handleUpload","e","target","files","setState","uploadTask","ref","name","put","on","snapshot","progressnew","Math","round","bytesTransferred","totalBytes","error","console","log","child","getDownloadURL","then","event","preventDefault","value","answer","window","confirm","data","isNullForm","db","database","set","alert","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport firebase from '../../lib/firebaseInit';\nimport {storage} from \"../../firebase\";\n\nclass Add_Form extends Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            Prefectures:'',\n            Place_Name:'',\n            DAY:'',\n            Shop_Name:'',\n            Weather:'',\n            SuitType:'',\n            Marine_life:'',\n            Memo:'',\n            image:null,\n            url:'',\n            progress:0,\n            checkFileUploadFlg:false,\n            errorMsg:''\n        }\n\n        this.onChangePrefectures = this.onChangePrefectures.bind(this);\n        this.onChangePlace_Name = this.onChangePlace_Name.bind(this);\n        this.onChangeDAY = this.onChangeDAY.bind(this);\n        this.onChangeShop_Name = this.onChangeShop_Name.bind(this);\n        this.onChangeWeather = this.onChangeWeather.bind(this);\n        this.onChangeSuitType = this.onChangeSuitType.bind(this);\n        this.onChangeMarine_life = this.onChangeMarine_life.bind(this);\n        this.onChangeMemo = this.onChangeMemo.bind(this);\n        this.exeAdd = this.exeAdd.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.handleUpload = this.handleUpload.bind(this);\n    }\n\n    handleChange(e){\n        if(e.target.files[0]){\n            this.setState({image: e.target.files[0]})\n            this.setState({checkFileUploadFlg:true})\n        }\n    }\n\n    handleUpload(){\n        const uploadTask = storage.ref(`images/${this.state.image.name}`).put(this.state.image);\n        uploadTask.on(\n            \"state_changed\",\n            snapshot => {\n                const progressnew = Math.round(\n                    (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n                );\n                this.setState({progress:progressnew})\n                this.setState({url:this.state.url})\n            },\n            error => {\n                console.log(error);\n            },\n            () =>{\n                storage\n                .ref(\"images\")\n                .child(this.state.image.name)\n                .getDownloadURL()\n                .then(url => {\n                    console.log(url);\n                    this.setState({url:url});\n                });\n            }\n        );\n        console.log(\"image: \",this.state.image);\n        event.preventDefault();\n    } \n\n    onChangePrefectures(e){\n        this.setState({Prefectures:e.target.value});\n    }\n\n    onChangePlace_Name(e){\n        this.setState({Place_Name:e.target.value});\n    }\n\n    onChangeDAY(e){\n        this.setState({DAY:e.target.value});\n    }\n\n    onChangeShop_Name(e){\n        this.setState({Shop_Name:e.target.value});\n    }\n\n    onChangeWeather(e){\n        this.setState({Weather:e.target.value});\n    }\n\n    onChangeSuitType(e){\n        this.setState({SuitType:e.target.value});\n    }\n\n    onChangeMarine_life(e){\n        this.setState({Marine_life:e.target.value});\n    }\n\n    onChangeMemo(e){\n        this.setState({Memo:e.target.value});\n    }\n\n    //データ登録\n    exeAdd(e){\n        const answer = window.confirm(\"登録内容にお間違いはありませんか？？\")\n        if(answer){\n        let data = {\n            Prefectures:this.state.Prefectures,\n            Place_Name:this.state.Place_Name,\n            DAY:this.state.DAY,\n            Shop_Name:this.state.Shop_Name,\n            Weather:this.state.Weather,\n            SuitType:this.state.SuitType,\n            Marine_life:this.state.Marine_life,\n            Memo:this.state.Memo\n        }\n        \n        if(this.isNullForm()){\n            let db = firebase.database();\n            let ref = db.ref('diving-point-map');\n            console.log(ref);\n            ref.set(data);\n            this.setState({\n                Prefectures:'',\n                Place_Name:'',\n                DAY:'',\n                Shop_Name:'',\n                Weather:'',\n                SuitType:'',\n                Marine_life:'',\n                Memo:'※データを登録しました。ご協力ありがとうございます！！'\n             })\n             event.preventDefault();\n         } else {\n             window.alert(errorMsg)\n             event.preventDefault();\n         }\n\n        }\n        event.preventDefault();\n    }\n  \n    isNullForm(){\n        if(this.state.Prefectures == null){\n            this.setState({errorMsg:'Prefecturesを入力してください'})\n            return false;\n        }\n        if(this.state.Place_Name == null){\n            this.setState({errorMsg:'Place_Nameを入力してください'})\n            return false;\n        }\n        if(this.state.DAY == null){\n            this.setState({errorMsg:'DAYを入力してください'})\n            return false;\n        }\n        if(this.state.Shop_Name == null){\n            this.setState({errorMsg:'Shop_Nameを入力してください'})\n            return false;\n        }\n        return true;\n    }\n    render(){\n        return(<div>\n            <form>\n                <table>\n                    <tbody>\n                        <tr>\n                        <th>Prefectures:</th>\n                    <td><input type=\"text\" size=\"50\" maxLength=\"7\" required\n                        value={this.state.Prefectures}\n                        onChange={this.onChangePrefectures} placeholder=\"都道府県\" /></td>\n                        </tr>\n                        <tr>\n                        <th>Place_Name:</th>\n                        <td><input type=\"text\" size=\"50\" maxLength=\"15\" required\n                            value={this.state.Place_Name}\n                            onChange={this.onChangePlace_Name} placeholder=\"ポイント名（地名）\" /></td>\n                        </tr>\n                        <tr>\n                        <th>DAY:</th>\n                        <td><input type=\"date\" size=\"50\" maxLength=\"10\" required\n                            value={this.state.DAY}\n                            onChange={this.onChangeDAY} placeholder=\"YYYY/MM/DD\" /></td>\n                        </tr>\n                        <tr>\n                        <th>Weather:</th>\n                        <td><input type=\"text\" size=\"50\" maxLength=\"10\"\n                            value={this.state.Weather}\n                            onChange={this.onChangeWeather} placeholder=\"快晴\" /></td>\n                        </tr>\n                        <tr>\n                        <th>Shop_Name:</th>\n                        <td><input type=\"text\" size=\"50\" maxLength=\"20\" required\n                            value={this.state.Shop_Name}\n                            onChange={this.onChangeShop_Name} placeholder=\"○○ダイビングショップ\" /></td>\n                        </tr>\n                        <tr>\n                        <th>SuitType:</th>\n                        <td><input type=\"text\" size=\"50\" maxLength=\"10\"\n                            value={this.state.SuitType}\n                            onChange={this.onChangeSuitType} placeholder=\"ドライスーツ/ウェットスーツ\" /></td>\n                        </tr>\n                        <tr>\n                        <th>Marine life:</th>\n                        <td><input type=\"text\" size=\"50\" maxLength=\"20\"\n                            value={this.state.Marine_life}\n                            onChange={this.onChangeMarine_life} placeholder=\"その日一番の生き物はなんでしょうか????\" required /></td>\n                        </tr>\n                        <tr>\n                        <th>Memo:</th>\n                        <td><input type=\"textarea\" size=\"50\" maxLength=\"20\"\n                            value={this.state.Memo}\n                            onChange={this.onChangeMemo} placeholder=\"透明度・透視度等、ご自由にお使いください\" /></td>\n                        </tr>\n                    </tbody>\n                </table>\n                \n                <br />\n                <p>あなたのベストショットを共有しませんか????</p>\n                <div className = \"FileImage\">\n                 <progress value={this.state.progress} max=\"100\" />\n                 <br />\n                 <br />\n                 <input type = \"file\" onChange ={this.handleChange} />\n                 {this.state.checkFileUploadFlg ?\n                 <button onClick={this.handleUpload}>Upload</button>\n                 :\n                 <p>ファイルを選択してください</p>\n                 }\n                 \n                 <br />\n                  {this.state.url}\n                 <br />\n                 <div className = \"p-grid_list-images\">\n                    <img src ={this.state.url || \"http://via.placeholder.com/300\"} alt =\"firebase-image\" className=\"img\"/>\n                 </div>\n                </div>\n                    <button onClick={this.exeAdd}>\n                            Add</button>\n                            </form>\n        </div>)\n    };\n};\n\nexport default Add_Form;"]},"metadata":{},"sourceType":"module"}